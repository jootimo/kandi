\begin{algorithm}
\small
\KwIn{\\\texttt{kuvataso}: $x*y$ kokoinen taulukko pikseleitä \\
\texttt{maisema}: joukko valonlähteitä ja monikulmioihin jaettuja objekteja}
\KwOut{\\kolmiulotteinen maisema projisoituna kuvatasolle}
\BlankLine
\nonl \texttt{RAY\_TRACING(kuvataso, maisema)}:\\
\ForEach{pikseli $(x,y) \; \epsilon$ \textnormal{\texttt{kuvataso}}}{
  \texttt{etaisyys} $\gets \infty$ \\
  \ForEach{monikulmio $\epsilon$ \textnormal{\texttt{maisema}}}{
    Ammu säde $\vec{R}=O+t\vec{D}$ kamerasta pikselin läpi \textnormal{\texttt{maisema}}an \\
    \eIf{säde $\vec{R}$ osui monikulmioon pisteessä $P$ {\bf and} t < \textnormal{\texttt{etaisyys}}}{
	\texttt{etaisyys} $\gets t$\\ 
      	Valon määrä $V \gets 0$\\
	\ForEach{valonlähde $L$}{
	Ammu varjostussäde $\vec{R_s}=L-P$ valonlähdettä kohti\\
	Kasvata valosummaa $V$               
      }
      Aseta pikselin $(x,y)$ väri valosumman $V$ mukaisesti
    }{
      Aseta pikseli $(x,y)$ taustan väriseksi
    }
  }
}
\KwRet \texttt{kuvataso}
\caption{\texttt{RAY\_TRACING}}
\label{algo_raytrace}
\end{algorithm}
