\begin{algorithm}[htp]
\small
\KwIn{\\
\texttt{BSP\_Node solmu}:\hspace{1.54cm} juurisolmu, josta puu rakennetaan\\
\texttt{Polygon monikulmiot[$\,$]}: monikulmiojoukko, josta alipuut rakennetaan}
\KwOut{\\BSP-puu, jonka juurena on solmu \texttt{node}}
\BlankLine
\nonl \texttt{RAKENNA\_BSP\_PUU(solmu, monikulmiot):\\}
 \texttt{jakaja} $\gets$ \texttt{VALITSE\_JAKAVA\_MONIKULMIO(monikulmiot)}\\
 \texttt{positiivinen\_joukko} $\gets \emptyset$\\
 \texttt{negatiivinen\_joukko} $\gets \emptyset$\\
 \ForEach{\textnormal{\texttt{$\gamma \, \epsilon$ monikulmiot}}}{
   \texttt{sijainti} $\gets$ \texttt{VERTAA($\gamma$, jakaja)}\\
  \uIf{\textnormal{\texttt{sijainti} = jakajan edessä}}{
   \texttt{positiivinen\_joukko} = \texttt{positiivinen\_joukko} $\cup\;\gamma$
  }
  \uElseIf{\textnormal{\texttt{sijainti} = jakajan takana}}{
   \texttt{negatiivinen\_joukko} = \texttt{negatiivinen\_joukko} $\cup\;\gamma$
  }
  \ElseIf{\textnormal{\texttt{sijainti} = leikkaa jakajan määrittämää tasoa}}{
   \texttt{JAA\_MONIKULMIO($\gamma$, jakaja, $\Gamma_{jakaja,+}$, $\Gamma_{jakaja,-}$)}\\
   \texttt{positiivinen\_joukko} = \texttt{positiivinen\_joukko} $\cup\;\Gamma_{jakaja,+}$\\
   \texttt{negatiivinen\_joukko} = \texttt{negatiivinen\_joukko} $\cup\;\Gamma_{jakaja,-}$
  }  
 }
\If{\textnormal{\texttt{positiivinen\_joukko}} $\neq \emptyset$}{
 \texttt{RAKENNA\_BSP\_PUU(solmu.oikea\_lapsi, positiivinen\_joukko)}
}
\If{\textnormal{\texttt{positiivinen\_joukko}} $\neq \emptyset$}{
 \texttt{RAKENNA\_BSP\_PUU(solmu.vasen\_lapsi, negatiivinen\_joukko)}
}

\caption{\texttt{RAKENNA\_BSP\_PUU \citep{ranta}}}\label{algo_bsp}
\end{algorithm}

